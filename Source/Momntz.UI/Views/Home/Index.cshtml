@model IList<Momntz.Data.Projections.Momentos.MomentoWithMedia>
@{
    ViewBag.Title = "Home.cshtml";
    Layout = "~/Views/Shared/_MasonryMaster.cshtml";
}

@section Head
{
    <script type="text/javascript">

        function getItems(getData) {
            var oldest = $('input#oldest');

            function executeOnData(data) {

                var item = data[data.length - 1];
                oldest.val(item.CreateDate);

                getData(data);
            }
            
            $.post('/api/momento/scroll?oldest=' + oldest.val(), executeOnData);
        }

        function getTemplate() {
            return $("#entry-template").html();
        }
    </script>
}

@section Navigation
{
    @{ Html.RenderPartial("/Views/Shared/_MasonryNavigationPartial.cshtml", null, new ViewDataDictionary()); }
}



@if (Model.Count > 0)
{
    <input type="hidden" id="oldest" value="@Model.Last().Momento.CreateDate.ToString()" />
}

@{ Html.RenderPartial("_MasonryPartial", Model); }
