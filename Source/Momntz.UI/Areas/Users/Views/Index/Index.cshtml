@model Momntz.UI.Areas.Users.Models.UserView 

@{
    Layout = "~/Views/Shared/_MasonryMaster.cshtml";
}

@section Head
{
    <script type="text/javascript">

        function getItems(getData) {
            var oldest = $('input#oldest');

            function executeOnData(data) {

                var item = data[data.length - 1];
                oldest.val(item.CreateDate);

                getData(data);
            }
            
            $.post('/api/momento/userscroll?username=@Model.Username&oldest=' + oldest.val(), executeOnData);
        }

        function getTemplate() {
            return $("#entry-template").html();
        }
    </script>
}

@if (Model.Items.Count > 0)
{
    <input type="hidden" id="oldest" value="@Model.Items.Last().CreateDate.ToString()" />
}

@section Navigation
{
    @{ Html.RenderPartial("/Views/Shared/_MasonryNavigationPartial.cshtml", Model); }
}

@{ Html.RenderPartial("_MasonryPartial", Model.Items); }